<h2>Dashboard</h2>

<div class="panel panel-default recent-data-set">
  <div class="panel-heading">Recent Datasets</div>
  <div class="panel-body" id="recent-datasets">
    {^{async recentDatasets}}
	  {^{if #data.length > 0}}
		<ul class="media-list dataset-list">
		  {^{for #data}}
			<li class="media">
			  <div class="pull-left" style="width: 96px; text-align: center;">
				<a class="media-left" href="#"><img src="{{>image+'/96'}}" alt="{{>name}}" /></a>
			  </div>
			  <div class="media-body">
				<h4 class="media-heading"><a href="/datasets/{{>id}}" data-navigation>{{>name}}</a></h4>
				<p>{{if description}}{{>description}}{{else}}<span class="text-muted">(No description)</span>{{/if}}</p>
				<div>
				  {{for ownerships ~length=ownerships.length}}
					<span class="label label-success">
					  <span class="glyphicon glyphicon-user"></span>
					  {{if ownerType == 1}} {{>fullname}} {{else}} {{>name}} {{/if}}
					</span>&nbsp;
				  {{/for}}
				</div>
				<div>
				  <span class="label label-default">{{>files}} files ({{datasize dataSize /}})</span>&nbsp;
				  {{for attributes}}
					<span class="label label-info"><span class="glyphicon glyphicon-tag"></span> {{>name}}{{if value}} : {{>value}}{{/if}}</span>
				  {{/for}}
				</div>
			  </div>
			</li>
		  {{/for}}
		</ul>
	  {{else}}
		 <p>There are no datasets.</p>
	  {{/if}}
    {{/async}}
  </div>
</div>

{{if !isGuest}}
  <div class="panel panel-default recent-data-set">
    <div class="panel-heading">My Datasets</div>
    <div class="panel-body" id="my-datasets">
      {^{async myDatasets}}
		  {^{if #data.length > 0}}
			<ul class="media-list dataset-list">
			  {^{for #data}}
				<li class="media">
				  <div class="pull-left" style="width: 96px; text-align: center;">
					<a class="media-left" href="#"><img src="{{>image+'/96'}}" alt="{{>name}}" /></a>
				  </div>
				  <div class="media-body">
					<h4 class="media-heading"><a href="/datasets/{{>id}}" data-navigation>{{>name}}</a></h4>
					<p>{{if description}}{{>description}}{{else}}<span class="text-muted">(No description)</span>{{/if}}</p>
					<div>
					  {{for ownerships ~length=ownerships.length}}
						<span class="label label-success">
						  <span class="glyphicon glyphicon-user"></span>
						  {{if ownerType == 1}} {{>fullname}} {{else}} {{>name}} {{/if}}
						</span>&nbsp;
					  {{/for}}
					</div>
					<div>
					  <span class="label label-default">{{>files}} files ({{datasize dataSize /}})</span>&nbsp;
					  {{for attributes}}
						<span class="label label-info"><span class="glyphicon glyphicon-tag"></span> {{>name}}{{if value}} : {{>value}}{{/if}}</span>
					  {{/for}}
					</div>
				  </div>
				</li>
			  {{/for}}
			</ul>
		  {{else}}
			 <p>There are no datasets.</p>
		  {{/if}}
      {{/async}}
    </div>
  </div>
{{/if}}

{{if !isGuest}}
  <div class="panel panel-default">
    <div class="panel-heading">My Groups</div>
    <div class="panel-body" id="my-groups">
      {^{async myGroups}}
        {^{if #data.length > 0}}
			<ul class="media-list dataset-list">
			  {^{for #data}}
				<li class="media">
				  <div class="pull-left" style="width: 96px; text-align: center;">
					<a class="media-left" href="#"><img src="{{>image+'/96'}}" alt="{{>name}}" /></a>
				  </div>
				  <div class="media-body">
					<h4 class="media-heading"><a href="/groups/{{>id}}" data-navigation>{{>name}}</a></h4>
					<p>{{if description}}{{>description}}{{else}}<span class="text-muted">(No description)</span>{{/if}}</p>
					<div>
					  <span class="label label-default">{{>members}} Members</span>
					  <span class="label label-default">{{>datasets}} Datasets</span>&nbsp;
					</div>
				  </div>
				</li>
			  {{/for}}
			</ul>
        {{else}}
          There are no groups.
        {{/if}}
      {{/async}}
    </div>
  </div>
{{/if}}